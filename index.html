<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ü´∂Quise ser la primera persona en felicitarte hoy 1 de noviembre.Espero te guste...üë∏</title>
<style>
body {
  margin:0; padding:0; font-family:"Poppins",sans-serif;
  text-align:center; color:white;
  background-image:url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e');
  background-size:cover; background-position:center;
  height:100vh; overflow:hidden;
}
.overlay {
  position:absolute; top:0; left:0; width:100%; height:100%;
  background:rgba(0,0,0,0.55); z-index:1;
}
h1 {
  font-size:2.5em; margin-top:60px;
  text-shadow:2px 2px 6px black; color:white;
  z-index:2; position:relative;
}
#countdown {
  font-size:1.8em; margin:20px 0;
  text-shadow:1px 1px 4px black; z-index:2;
  position:relative; color:white;
}
.envelopes {
  display:flex; justify-content:center; flex-wrap:wrap;
  gap:30px; margin-top:50px; z-index:2; position:relative;
}
.envelope {
  width:100px; height:80px; background:#f1c40f;
  border-radius:5px; position:relative;
  cursor:not-allowed; opacity:0.5;
  box-shadow:0 4px 10px rgba(0,0,0,0.3);
  transition: transform 0.3s, opacity 0.3s;
}
.envelope.unlocked {
  cursor:pointer; opacity:1;
  animation: shine 2s infinite alternate ease-in-out;
}
.envelope:hover { transform:scale(1.1); }
@keyframes shine {
  0% { box-shadow:0 0 10px #f1c40f,0 0 20px #f39c12; transform:translateY(0);}
  50% { box-shadow:0 0 25px #ffd700,0 0 40px #f39c12; transform:translateY(-5px);}
  100% { box-shadow:0 0 10px #f1c40f,0 0 20px #f39c12; transform:translateY(0);}
}
.flap {
  width:0; height:0;
  border-left:50px solid transparent;
  border-right:50px solid transparent;
  border-bottom:40px solid #f39c12;
  position:absolute; top:0; left:0;
}
.message-box, .confirm-box, .password-box {
  display:none; position:fixed; top:50%; left:50%;
  transform:translate(-50%, -50%);
  background: rgba(255,255,255,0.95); color:black;
  padding:20px; border-radius:15px;
  box-shadow:0 0 20px rgba(0,0,0,0.6);
  width:80%; max-width:400px; z-index:10;
}
.message-box h2, .confirm-box h2, .password-box h2 {
  color:#e67e22;
}
.btn {
  margin-top:15px; padding:8px 20px;
  background:#f39c12; border:none;
  border-radius:10px; cursor:pointer;
  color:white; font-size:1em;
}
.btns {
  display:flex; justify-content:space-around; margin-top:20px;
}
.confetti {
  position:absolute; width:10px; height:10px;
  opacity:0.9; z-index:9; pointer-events:none;
  animation:fall 3s linear infinite;
}
@keyframes fall {
  0% { transform:translateY(-10px) rotate(0deg);}
  100% { transform:translateY(110vh) rotate(360deg);}
}
</style>
</head>
<body>

<audio id="badbunny" src="badbunny_fragmento.mp3"></audio>
<audio id="felizcumple" src="feliz_cumpleanos.mp3"></audio>

<div class="overlay"></div>
<h1>üéâ Feliz Cumplea√±os Hermosa üéâ</h1>
<div id="countdown"></div>

<div class="envelopes" id="envelopeContainer">
  <div class="envelope" onclick="confirmOpen(1)"><div class="flap"></div></div>
  <div class="envelope" onclick="confirmOpen(2)"><div class="flap"></div></div>
  <div class="envelope" onclick="confirmOpen(3)"><div class="flap"></div></div>
  <div class="envelope" onclick="confirmOpen(4)"><div class="flap"></div></div>
  <div class="envelope" onclick="confirmOpen(5)"><div class="flap"></div></div>
</div>

<div id="confirmBox" class="confirm-box">
  <h2>üíå ¬øEst√°s segura de abrir este sobre?</h2>
  <div class="btns">
    <button class="btn" onclick="openEnvelope()">S√≠</button>
    <button class="btn" onclick="closeConfirm()">No</button>
  </div>
</div>

<div id="messageBox" class="message-box">
  <h2>üíõ Sorpresa</h2>
  <p id="messageText"></p>
  <button class="btn" onclick="closeMessage()">Cerrar</button>
</div>

<div id="passwordBox" class="password-box">
  <h2>üîê Ingresa la contrase√±a</h2>
  <input type="password" id="passwordInput" placeholder="Escr√≠bela aqu√≠" style="padding:8px; width:80%; border-radius:8px; border:1px solid #ccc;"><br>
  <button class="btn" onclick="checkPassword()">Aceptar</button>
</div>

<script>
const countdown = document.getElementById('countdown');
const envelopes = document.querySelectorAll('.envelope');
let selectedEnvelope = null;
let openedCount = 0;

const messages = {
1: "üíõ Eres una persona muy especial. Que este d√≠a est√© lleno de sonrisas, amor y momentos inolvidables.",
2: "üåª Cada d√≠a que pasa, me alegra haberte conocido. Espero que este cumplea√±os sea tan bonito como t√∫.",
3: "üé∂ Hoy el mundo celebra a alguien incre√≠ble. Gracias por ser t√∫, por tu alegr√≠a y tu forma de ser.",
4: "üéÅ Que cada deseo que pidas hoy se te cumpla, porque te lo mereces.",
5: "üí´ Ojal√° la vida te devuelva todo lo bonito que das, porque eres una persona √∫nica."
};

function unlockEnvelopes(){ envelopes.forEach(e=>{ e.classList.add('unlocked'); e.style.cursor='pointer'; }); }
function confirmOpen(num){ if(!envelopes[num-1].classList.contains('unlocked')) return; selectedEnvelope=num; document.getElementById('confirmBox').style.display='block'; }
function closeConfirm(){ document.getElementById('confirmBox').style.display='none'; }
function openEnvelope(){
  document.getElementById('confirmBox').style.display='none';
  document.getElementById('messageText').innerText=messages[selectedEnvelope];
  document.getElementById('messageBox').style.display='block';
  openedCount++;
  if(openedCount===5){
    setTimeout(showFinalEnvelope, 1000);
  }
}
function closeMessage(){ document.getElementById('messageBox').style.display='none'; }

function showFinalEnvelope(){
  document.getElementById('envelopeContainer').innerHTML = `
    <div class="envelope unlocked" onclick="showFinalMessage()">
      <div class="flap"></div>
    </div>`;
}

function showFinalMessage(){
  const messageBox = document.getElementById('messageBox');
  messageBox.style.display='block';
  document.getElementById('messageText').innerText = 
    "üéá Esta es la sorpresa final üíõ\nSolo quer√≠a decirte que me alegra mucho haberte conocido y deseo que hoy tengas un cumplea√±os inolvidable üåª";
  
  // Confeti inicial
  startConfetti();

  // Despu√©s de 5 segundos, mostrar "Hasta Luego!!"
  setTimeout(() => {
    document.getElementById('messageText').innerText = "üëã Hasta Luego!! üíõ";
    startConfetti();
  }, 5000);
}

function startConfetti(){
  for(let i=0;i<150;i++){
    const c=document.createElement('div');
    c.classList.add('confetti');
    c.style.backgroundColor=`hsl(${Math.random()*360},100%,50%)`;
    c.style.left=Math.random()*100+'vw';
    c.style.animationDuration=(2+Math.random()*3)+'s';
    c.style.width=(5+Math.random()*10)+'px';
    c.style.height=c.style.width;
    document.body.appendChild(c);
    setTimeout(()=>c.remove(),5000);
  }
}

function playBirthdaySequence(){
  const badbunny=document.getElementById('badbunny');
  const felizcumple=document.getElementById('felizcumple');
  badbunny.currentTime=30; badbunny.volume=0.5; badbunny.play();
  setTimeout(()=>{
    badbunny.pause();
    setTimeout(()=>{ felizcumple.currentTime=0; felizcumple.volume=0.5; felizcumple.play(); },2000);
  },8000);
}

function showPasswordBox(){ document.getElementById('passwordBox').style.display='block'; }
function checkPassword(){
  const input = document.getElementById('passwordInput').value;
  if(input === "071113"){
    document.getElementById('passwordBox').style.display='none';
    unlockEnvelopes();
    startConfetti();
    playBirthdaySequence();
  } else {
    alert("Contrase√±a incorrecta üíõ");
  }
}

// üéØ Contador ajustado a la hora de Nicaragua (UTC-6)
function getNicaraguaTime() {
  const now = new Date();
  const utc = now.getTime() + (now.getTimezoneOffset() * 60000);
  return new Date(utc - 6 * 60 * 60 * 1000);
}

function startCountdown() {
  const targetDate = new Date(Date.UTC(2025, 10, 1, 6, 0, 0)); // 00:00 en Nicaragua = 06:00 UTC
  const timer = setInterval(() => {
    const now = getNicaraguaTime();
    const distance = targetDate - now;

    if (distance <= 0) {
      clearInterval(timer);
      countdown.innerHTML = "ü´∂ Quise ser la primera persona en felicitarte hoy 1 de noviembre y que mejor que de esta manera. Espero te guste..üë∏";
      showPasswordBox();
      return;
    }

    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
    const seconds = Math.floor((distance % (1000 * 60)) / 1000);

    countdown.innerHTML = `‚è≥ ${days}d ${hours}h ${minutes}m ${seconds}s`;
  }, 1000);
}

window.addEventListener('load', () => startCountdown());
</script>
</body>
</html>