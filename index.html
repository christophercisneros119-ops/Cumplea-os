<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üíõ Sorpresa Especial üíõ</title>
<style>
body {
  margin:0; padding:0;
  font-family:"Poppins",sans-serif;
  background-image:url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e');
  background-size:cover; background-position:center;
  text-align:center; color:white; height:100vh; overflow:hidden;
}
.overlay {
  position:absolute; top:0; left:0; width:100%; height:100%;
  background:rgba(0,0,0,0.55); z-index:1;
}
h1 {
  font-size:2.5em; margin-top:60px;
  text-shadow:2px 2px 6px black;
  z-index:2; position:relative;
}
#countdown {
  font-size:1.8em; margin:20px 0;
  text-shadow:1px 1px 4px black;
  z-index:2; position:relative;
}
.envelopes {
  display:flex; justify-content:center; flex-wrap:wrap;
  gap:30px; margin-top:50px;
  z-index:2; position:relative; transition: opacity 1s ease;
}
.envelope {
  width:100px; height:80px;
  background:#f1c40f; border-radius:5px;
  position:relative; cursor:not-allowed; opacity:0.5;
  box-shadow:0 4px 10px rgba(0,0,0,0.3);
  transition:transform 0.3s, opacity 0.3s;
}
.envelope.unlocked {
  cursor:pointer; opacity:1;
  animation:shine 2s infinite alternate ease-in-out;
}
.envelope:hover { transform:scale(1.1);}
@keyframes shine {
  0% { box-shadow:0 0 10px #f1c40f,0 0 20px #f39c12;}
  50% { box-shadow:0 0 25px #ffd700,0 0 40px #f39c12;}
  100% { box-shadow:0 0 10px #f1c40f,0 0 20px #f39c12;}
}
.flap {
  width:0; height:0;
  border-left:50px solid transparent;
  border-right:50px solid transparent;
  border-bottom:40px solid #f39c12;
  position:absolute; top:0; left:0;
}
.message-box, .confirm-box, .password-box {
  display:none; position:fixed; top:50%; left:50%;
  transform:translate(-50%, -50%);
  background:rgba(255,255,255,0.95);
  color:black; padding:20px;
  border-radius:15px; box-shadow:0 0 20px rgba(0,0,0,0.6);
  width:80%; max-width:400px; z-index:10;
}
.message-box h2, .confirm-box h2, .password-box h2 { color:#e67e22;}
.btn {
  margin-top:15px; padding:8px 20px;
  background:#f39c12; border:none; border-radius:10px;
  cursor:pointer; color:white; font-size:1em;
}
.btns { display:flex; justify-content:space-around; margin-top:20px;}
.confetti {
  position:absolute; width:10px; height:10px; opacity:0.9;
  z-index:9; pointer-events:none;
  animation:fall 3s linear infinite;
}
@keyframes fall {
  0% { transform:translateY(-10px) rotate(0deg);}
  100% { transform:translateY(110vh) rotate(360deg);}
}
/* --- Sobre Final --- */
.final-envelope {
  display:none;
  width:130px; height:100px; background:#e67e22;
  border-radius:5px; margin:100px auto;
  box-shadow:0 4px 15px rgba(0,0,0,0.5);
  position:relative; cursor:pointer;
  animation:shine 2s infinite alternate ease-in-out;
  z-index:3;
}
.final-flap {
  width:0; height:0;
  border-left:65px solid transparent;
  border-right:65px solid transparent;
  border-bottom:50px solid #d35400;
  position:absolute; top:0; left:0;
}
.final-message {
  display:none; position:fixed; top:50%; left:50%;
  transform:translate(-50%, -50%);
  background:rgba(255,255,255,0.95); color:#333;
  padding:30px; border-radius:20px;
  box-shadow:0 0 30px rgba(0,0,0,0.5);
  width:85%; max-width:500px; text-align:center;
  animation:fadeIn 1s ease forwards; z-index:15;
}
.final-message h2 { color:#f39c12; }
@keyframes fadeIn {
  from {opacity:0; transform:translate(-50%,-45%);}
  to {opacity:1; transform:translate(-50%,-50%);}
}
</style>
</head>
<body>
<div class="overlay"></div>
<h1>üéâ Feliz Cumplea√±os üíõ</h1>
<div id="countdown"></div>

<div class="envelopes">
  <div class="envelope" onclick="confirmOpen(1)"><div class="flap"></div></div>
  <div class="envelope" onclick="confirmOpen(2)"><div class="flap"></div></div>
  <div class="envelope" onclick="confirmOpen(3)"><div class="flap"></div></div>
  <div class="envelope" onclick="confirmOpen(4)"><div class="flap"></div></div>
  <div class="envelope" onclick="confirmOpen(5)"><div class="flap"></div></div>
</div>

<div id="confirmBox" class="confirm-box">
  <h2>üíå ¬øAbrimos este sobre?</h2>
  <div class="btns">
    <button class="btn" onclick="openEnvelope()">S√≠</button>
    <button class="btn" onclick="closeConfirm()">No</button>
  </div>
</div>

<div id="messageBox" class="message-box">
  <h2>üíõ Sorpresa</h2>
  <p id="messageText"></p>
  <button class="btn" onclick="closeMessage()">Cerrar</button>
</div>

<div id="passwordBox" class="password-box">
  <h2>üîê Ingresa la contrase√±a</h2>
  <input type="password" id="passInput" placeholder="Escr√≠bela aqu√≠" style="padding:8px;border-radius:8px;border:1px solid #ccc;width:80%;">
  <br>
  <button class="btn" onclick="checkPassword()">Aceptar</button>
</div>

<div id="finalEnvelope" class="final-envelope" onclick="showFinalMessage()">
  <div class="final-flap"></div>
</div>

<div id="finalMessage" class="final-message">
  <h2>üíõ Sorpresa Final üíõ</h2>
  <p>
    Gracias por abrir cada sobre con una sonrisa üíõ<br><br>
    Este √∫ltimo es solo para recordarte<br>
    que eres alguien muy especial üåª‚ú®
  </p>
  <button class="btn" onclick="closeFinalMessage()">Cerrar</button>
</div>

<script>
const countdown = document.getElementById('countdown');
const envelopes = document.querySelectorAll('.envelope');
let selectedEnvelope = null;
let openedCount = 0;
let seconds = 10; // para prueba r√°pida
const password = "071113";

const messages = {
1: "üíõ Que este d√≠a est√© lleno de alegr√≠a, amor y momentos inolvidables.",
2: "üåª Eres una persona incre√≠ble. Me alegra haberte conocido.",
3: "üé∂ Que nunca te falte una sonrisa, ni razones para ser feliz.",
4: "üéÅ Todo lo bonito del mundo deber√≠a estar contigo.",
5: "üí´ Hoy brillas m√°s que nunca. ¬°Feliz cumplea√±os!"
};

function unlockEnvelopes(){
  envelopes.forEach(e=>{ e.classList.add('unlocked'); e.style.cursor='pointer'; });
}

function confirmOpen(num){
  if(!envelopes[num-1].classList.contains('unlocked')) return;
  selectedEnvelope=num;
  document.getElementById('confirmBox').style.display='block';
}
function closeConfirm(){ document.getElementById('confirmBox').style.display='none'; }

function openEnvelope(){
  document.getElementById('confirmBox').style.display='none';
  document.getElementById('messageText').innerText = messages[selectedEnvelope];
  document.getElementById('messageBox').style.display='block';
  envelopes[selectedEnvelope-1].classList.remove('unlocked');
  envelopes[selectedEnvelope-1].style.opacity='0.3';
  envelopes[selectedEnvelope-1].style.cursor='not-allowed';
  openedCount++;

  if(openedCount === 5){
    setTimeout(()=>{
      document.querySelector('.envelopes').style.opacity='0';
      setTimeout(()=>{
        document.querySelector('.envelopes').style.display='none';
        const finalEnv = document.getElementById('finalEnvelope');
        finalEnv.style.display='block';
        finalEnv.style.opacity='1';
        startConfetti();
      },1000);
    },1000);
  }
}

function closeMessage(){ document.getElementById('messageBox').style.display='none'; }

function startConfetti(){
  for(let i=0;i<100;i++){
    const c=document.createElement('div');
    c.classList.add('confetti');
    c.style.backgroundColor=`hsl(${Math.random()*360},100%,50%)`;
    c.style.left=Math.random()*100+'vw';
    c.style.animationDuration=(2+Math.random()*3)+'s';
    c.style.width=(5+Math.random()*10)+'px';
    c.style.height=c.style.width;
    document.body.appendChild(c);
    setTimeout(()=>c.remove(),4000);
  }
}

function startCountdownTest(){
  const timer=setInterval(()=>{
    countdown.innerHTML=`‚è≥ Espera ${seconds}s para continuar...`;
    seconds--;
    if(seconds<0){
      clearInterval(timer);
      countdown.innerHTML="‚ú® Tiempo cumplido ‚ú®";
      document.getElementById('passwordBox').style.display='block';
    }
  },1000);
}

function checkPassword(){
  const input=document.getElementById('passInput').value;
  if(input===password){
    document.getElementById('passwordBox').style.display='none';
    countdown.innerHTML="‚úÖ Contrase√±a correcta. ¬°Ya puedes abrir los sobres!";
    unlockEnvelopes();
    startConfetti();
  } else {
    countdown.innerHTML="‚ùå Contrase√±a incorrecta, intenta de nuevo";
  }
}

// --- SOBRE FINAL ---
function showFinalMessage(){
  document.getElementById('finalEnvelope').style.display='none';
  document.getElementById('finalMessage').style.display='block';
  startConfetti();
}
function closeFinalMessage(){
  document.getElementById('finalMessage').style.display='none';
}

window.addEventListener('load', startCountdownTest);
</script>
</body>
</html>